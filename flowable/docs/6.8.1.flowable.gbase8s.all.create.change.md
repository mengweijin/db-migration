# 6.8.1.flowable.gbase8s.all.create.sql

修改来源于：<https://github.com/flowable/flowable-engine/blob/flowable-release-6.8.1/distro/sql/create/all/flowable.oracle.all.create.sql>

## Gbase8s 修改 flowable 6.8.1 版本 sql语句


1. 将 NVARCHAR2 替换成 VARCHAR。
2. 将 NUMBER(*,10) 替换为 DECIMAL(28, 10)
3. 将 NUMBER 替换成 DECIMAL
4. 修改 ALTER 添加外键的语句支持 gbase8s。将语句中的 constraint 后边的名称去掉即可。
    - 例如：Intellij IDEA 中搜索 “foreign key”：
    - alter table ACT_ID_PRIV_MAPPING add constraint ACT_FK_PRIV_MAPPING foreign key (PRIV_ID_) references ACT_ID_PRIV (ID_);
    - 修改为：
    - alter table ACT_ID_PRIV_MAPPING add constraint foreign key (PRIV_ID_) references ACT_ID_PRIV (ID_);
5. 修改 ALTER 添加唯一约束的语法支持 gbase8s。将语句中的 constraint 后边的名称去掉，在最后面加上：constraint 名称；
   - 例如：Intellij IDEA 中可搜索 “unique”
   - alter table ACT_ID_PRIV add constraint ACT_UNIQ_PRIV_NAME unique (NAME_);
   - 修改后：
   - alter table ACT_ID_PRIV add constraint unique (NAME_) constraint ACT_UNIQ_PRIV_NAME;
6. 以下两条语句，需要特别调整合并为一条语句，并且放在前面。
   - 修改前：
   - create index ACT_IDX_PROCDEF_INFO_PROC on ACT_PROCDEF_INFO(PROC_DEF_ID_);
   - alter table ACT_PROCDEF_INFO add constraint ACT_UNIQ_INFO_PROCDEF unique (PROC_DEF_ID_);
   - 修改后：
   - create unique index ACT_IDX_PROCDEF_INFO_PROC on ACT_PROCDEF_INFO(PROC_DEF_ID_);
7. 从创建 ACT_APP_DATABASECHANGELOGLOCK 表以后，修改 CREATE TABLE 语法。
   - 例如：(搜索：CONSTRAINT PK_)（去掉：CONSTRAINT PK_主键名称）
   - 修改前：
   - CREATE TABLE ACT_APP_DATABASECHANGELOGLOCK (ID INTEGER NOT NULL, LOCKED DECIMAL(1) NOT NULL, LOCKGRANTED TIMESTAMP, LOCKEDBY VARCHAR2(255), CONSTRAINT PK_ACT_APP_DATABASECHANGELOGLO PRIMARY KEY (ID));
   - 修改后：
   - CREATE TABLE ACT_APP_DATABASECHANGELOGLOCK (ID INTEGER NOT NULL, LOCKED DECIMAL(1) NOT NULL, LOCKGRANTED TIMESTAMP, LOCKEDBY VARCHAR2(255), PRIMARY KEY (ID));
8. 时间修改(搜索：TO_TIMESTAMP)。把类似于 TO_TIMESTAMP('2022-12-21 17:24:54.791', 'YYYY-MM-DD HH24:MI:SS.FF') 改为 SYSDATE
   - 修改前：
   - UPDATE ACT_APP_DATABASECHANGELOGLOCK SET LOCKED = 1, LOCKEDBY = '192.168.10.1 (192.168.10.1)', LOCKGRANTED = TO_TIMESTAMP('2022-12-21 17:24:47.506', 'YYYY-MM-DD HH24:MI:SS.FF') WHERE ID = 1 AND LOCKED = 0;
   - 修改后：
   - UPDATE ACT_APP_DATABASECHANGELOGLOCK SET LOCKED = 1, LOCKEDBY = '192.168.10.1 (192.168.10.1)', LOCKGRANTED = SYSDATE WHERE ID = 1 AND LOCKED = 0;
9. 这几行注释掉。
   - CREATE INDEX ACT_IDX_APP_RSRC_DPL ON ACT_APP_DEPLOYMENT_RESOURCE(DEPLOYMENT_ID_);
   - CREATE INDEX ACT_IDX_APP_DEF_DPLY ON ACT_APP_APPDEF(DEPLOYMENT_ID_);
   - CREATE INDEX ACT_IDX_CMMN_RSRC_DPL ON ACT_CMMN_DEPLOYMENT_RESOURCE(DEPLOYMENT_ID_);
   - CREATE INDEX ACT_IDX_CASE_DEF_DPLY ON ACT_CMMN_CASEDEF(DEPLOYMENT_ID_);
   - CREATE INDEX ACT_IDX_CASE_INST_CASE_DEF ON ACT_CMMN_RU_CASE_INST(CASE_DEF_ID_);
   - CREATE INDEX ACT_IDX_PLAN_ITEM_CASE_DEF ON ACT_CMMN_RU_PLAN_ITEM_INST(CASE_DEF_ID_);
   - CREATE INDEX ACT_IDX_PLAN_ITEM_CASE_INST ON ACT_CMMN_RU_PLAN_ITEM_INST(CASE_INST_ID_);
   - CREATE INDEX ACT_IDX_SENTRY_CASE_DEF ON ACT_CMMN_RU_SENTRY_PART_INST(CASE_DEF_ID_);
   - CREATE INDEX ACT_IDX_SENTRY_CASE_INST ON ACT_CMMN_RU_SENTRY_PART_INST(CASE_INST_ID_);
   - CREATE INDEX ACT_IDX_SENTRY_PLAN_ITEM ON ACT_CMMN_RU_SENTRY_PART_INST(PLAN_ITEM_INST_ID_);
   - CREATE INDEX ACT_IDX_MIL_CASE_DEF ON ACT_CMMN_RU_MIL_INST(CASE_DEF_ID_);
   - CREATE INDEX ACT_IDX_MIL_CASE_INST ON ACT_CMMN_RU_MIL_INST(CASE_INST_ID_);
10. SYSTIMESTAMP 改为 SYSDATE。
11. 所有 RENAME COLUMN 的修改。
    - 例如：
    - ALTER TABLE ACT_CMMN_RU_PLAN_ITEM_INST RENAME COLUMN START_TIME_ TO CREATE_TIME_;
    - 改为：
    - RENAME COLUMN ACT_CMMN_RU_PLAN_ITEM_INST.START_TIME_ TO CREATE_TIME_;
12. 所有 DROP COLUMN 的修改。
    - ALTER TABLE ACT_DMN_DECISION_TABLE DROP COLUMN PARENT_DEPLOYMENT_ID_;
    - 改为：
    - ALTER TABLE ACT_DMN_DECISION_TABLE DROP (PARENT_DEPLOYMENT_ID_);
13. 所有 RENAME TABLE NAME 的修改。
    - ALTER TABLE ACT_DMN_DECISION_TABLE RENAME TO ACT_DMN_DECISION;
    - 改为：
    - RENAME TABLE ACT_DMN_DECISION_TABLE TO ACT_DMN_DECISION;
